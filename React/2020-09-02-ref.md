# í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ refë¥¼ ì‚¬ìš©í•˜ë ¤ë©´?

- Title : í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ refë¥¼ ì‚¬ìš©í•˜ë ¤ë©´?
- Date : 2020-09-02
- Category: React

# Key Point ðŸ’¥

ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ `useRef` í›…ìœ¼ë¡œ ìƒì„±í•œ refë¥¼ ìžì‹ ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬í•˜ê³  ì‹¶ë‹¤ë©´? **forwardRef**ë¥¼ ì‚¬ìš©í•˜ìž!
í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ê¸° ë•Œë¬¸ì— í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì— ref ì–´íŠ¸ë¦¬ë·°íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì— refë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ í•˜ë ¤ë©´!

- [forwardRef](https://ko.reactjs.org/docs/forwarding-refs.html) ë˜ëŠ” forwardRef + [useImperativeHandle](https://ko.reactjs.org/docs/hooks-reference.html#useimperativehandle) ë¥¼ ì‚¬ìš©
- í´ëž˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ë¡œ ë³€ê²½

ë‹¨, DOM ì—˜ë¦¬ë¨¼íŠ¸ë‚˜ í´ëž˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ì˜ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´Â `ref`Â ****ì–´íŠ¸ë¦¬ë·°íŠ¸ë¥¼ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.

# ì‚½ì§ˆê¸° â›ï¸

í˜„ìž¬ì˜ Copy ì»´í¬ë„ŒíŠ¸ì—ì„œ Overlayì˜ target ì†ì„±ì´ Copy ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ useRefë¡œ ìƒì„±í•œ ref ê°’ì„ ì „ë‹¬í•œë‹¤. ë‚´ê°€ êµ¬í˜„í•˜ê³  ì‹¶ì—ˆë˜ ê±´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ refë¥¼ ë°›ì•„ì„œ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ íŠ¹ì • DOM ìœ„ì— overlayë¥¼ ë³´ì—¬ì£¼ëŠ” ê±°ë‹¤. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ useRefë¡œ ë§Œë“  ê°’ì„ propsë¡œ ì „ë‹¬í–ˆì§€ë§Œ Copy ìžì²´ê°€ ë™ìž‘í•˜ì§€ ì•Šì•˜ë‹¤. íœ´ ê³„ì† ì‚½ì§ˆì„ í–ˆì§€ë§Œ ë‹µì€ ê³µì‹ ë¬¸ì„œì— ìžˆì—ˆë‹¤. ë¬¸ì„œë¥¼ ì—´ì‹¬ížˆ ì½ìž!! ðŸ˜†

ìˆ˜ì • ì „ Copy.jsx

```jsx
import React, { useState, useEffect, useRef } from 'react';
import { CopyToClipboard } from 'react-copy-to-clipboard';
import { Overlay, Tooltip } from 'react-bootstrap';

const Copy = ({ children, text, placement, copiedMsg }) => {
  const [isShowCopied, setIsShowCopied] = useState(false);
  const target = useRef(null);

  useEffect(() => {
    if (!isShowCopied) return;

    setTimeout(() => {
      setIsShowCopied(false);
    }, 2000);
  }, [isShowCopied]);

  return (
    <>
      <CopyToClipboard
        text={text}
        onCopy={() => {
          setIsShowCopied(true);
        }}
      >
        {React.cloneElement(children, { ref: target })}
      </CopyToClipboard>
      <Overlay target={target.current} show={isShowCopied} placement={placement}>
        <Tooltip>{copiedMsg}</Tooltip>
      </Overlay>
    </>
  );
};

export default Copy;
```

ìˆ˜ì • í›„ Copy.jsx

```jsx
import React, { useState, useEffect, useRef, forwardRef } from 'react';
import { CopyToClipboard } from 'react-copy-to-clipboard';
import { Overlay, Tooltip } from 'react-bootstrap';

const Copy = forwardRef(({ children, text, placement, copiedMsg }, ref) => {
  const [isShowCopied, setIsShowCopied] = useState(false);
  const target = useRef(null);

  useEffect(() => {
    if (!isShowCopied) return;

    setTimeout(() => {
      setIsShowCopied(false);
    }, 2000);
  }, [isShowCopied]);

  return (
    <>
      <CopyToClipboard
        text={text}
        onCopy={() => {
          setIsShowCopied(true);
        }}
      >
        {React.cloneElement(children, { ref: target })}
      </CopyToClipboard>
      <Overlay target={(ref && ref.current) || target.current} show={isShowCopied} placement={placement}>
        <Tooltip>{copiedMsg}</Tooltip>
      </Overlay>
    </>
  );
});

export default Copy;
```